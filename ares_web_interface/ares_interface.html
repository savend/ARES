<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />

<link rel="stylesheet" type="text/css" href="style.css">


<!-- <script type="text/javascript" src="http://static.robotwebtools.org/EaselJS/current/easeljs.min.js"></script>
<script type="text/javascript" src="http://static.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js"></script>
<script type="text/javascript" src="http://static.robotwebtools.org/roslibjs/current/roslib.min.js"></script>
<script type="text/javascript" src="http://static.robotwebtools.org/ros2djs/current/ros2d.min.js"></script>
<script type="text/javascript" src="http://static.robotwebtools.org/nav2djs/current/nav2d.min.js"></script>
<script type="text/javascript" src="http://static.robotwebtools.org/mjpegcanvasjs/current/mjpegcanvas.min.js"></script> -->

<script type="text/javascript" src="easeljs.min.js"></script>
<script type="text/javascript" src="eventemitter2.min.js"></script>
<script type="text/javascript" src="roslib.min.js"></script>
<script type="text/javascript" src="ros2d.min.js"></script>
<script type="text/javascript" src="nav2d.min.js"></script>
<script type="text/javascript" src="mjpegcanvas.min.js"></script>

<script type="text/javascript">
	/**
	* Setup all GUI elements when the page is loaded.
	*/

	function init() {
		// Connect to ROS.
		var ros = new ROSLIB.Ros({
			url : 'ws://localhost:9090'
		});


		// Create the main viewer.
		var viewer = new ROS2D.Viewer({
			divID : 'nav',
			width : 640,
			height : 480
		});

		// Setup the nav client.
		var nav = NAV2D.OccupancyGridClientNav({
			ros : ros,
			rootObject : viewer.scene,
			viewer : viewer,
			continuous : true,
			serverName : '/move_base'
		});

		//Setup Camera
		var viewer = new MJPEGCANVAS.Viewer({
			divID : 'mjpeg',
			host : 'localhost',
			width : 640,
			height : 480,
			topic : '/camera/image_raw'
		});

		//Setup Topic
		var listener = new ROSLIB.Topic({
			ros : ros,
			name : '/joint_states',
			messageType : 'sensor_msgs/JointState'
		});

		//Refresh Topic
		function joint_topic(){
			listener.subscribe(function(message) {
				document.getElementById("joint").innerHTML = message.header.seq;
				listener.unsubscribe();
			});
		}
		setInterval(joint_topic, 10) //Refresh Topic all 10ms

		// Object_Temp Setup
		var listener_ObjTemp = new ROSLIB.Topic({
			ros : ros,
			name : '/object_temp',
			messageType : 'std_msgs/Float64'
		});

		//Refresh Topic
		function ObjTemp_topic(){
			listener_ObjTemp.subscribe(function(message) {
				document.getElementById("Object_Temp_TextID").innerHTML = message.header.data;
				listener_ObjTemp.unsubscribe();
			});
		}

		setInterval(ObjTemp_topic, 1000) //Refresh Topic all 10ms

		// Ambient_Temp Setup
		var listener_AmbTemp = new ROSLIB.Topic({
			ros : ros,
			name : '/ambient_temp',
			messageType : 'std_msgs/Float64'
		});

		//Refresh Topic
		function AmbientTemp_topic(){
			listener_AmbTemp.subscribe(function(message) {
				document.getElementById("AmbTemp_TextID").innerHTML = message.header.data;
				listener_AmbTemp.unsubscribe();
			});
		}
		setInterval(AmbientTemp_topic, 1000) //Refresh Topic all 10ms

		// O2 Setup
		var listener_O2 = new ROSLIB.Topic({
			ros : ros,
			name : '/o2_concentration',
			messageType : 'std_msgs/Float32'
		});

		//Refresh Topic O2
		function O2_topic(){
			listener_O2.subscribe(function(message) {
				document.getElementById("O2_TextID").innerHTML = message.header.data;
				listener_O2.unsubscribe();
			});
		}

		setInterval(O2_topic, 1000) //Refresh Topic all 10ms

		// Battery Setup
		var listener_Battery = new ROSLIB.Topic({
			ros : ros,
			name : '/battery_state',
			messageType : 'sensor_msgs/BatteryState'
		});

		//Refresh Topic Batterystate
		function BatteryState_topic(){
			listener_Battery.subscribe(function(message) {
				document.getElementById("Battery_TextID").innerHTML = message.header.voltage;
				listener_Battery.unsubscribe();
			});
		}

		setInterval(BatteryState_topic, 1000) //Refresh Topic all 10ms
	}
</script>
</head>

<body onload="init()">



	<header>
		<h1>Remote Controll-Deck </h1>
	</header>
			

	<div class="container_visualisation">

		<div class="container_stream">

			<h3>Stream ARES</h3>
			<div id="mjpeg"></div>
		</div>

			
		<div class="container_map">
			
			<h3>Map ARES</h3>
			<div id="nav"></div>
		</div>	
			
	</div>		


	<div class="container_visualisation">
		

		<div class= "sensor_Box">
									
			<h4> O2 WERT [%] </h4>
			<h5 id= "O2_TextID"> No Data</h5>

		</div>


		<div class="sensor_Box">

			<h4> OBjTemp [°C]</h4>
			<h5 id="Object_Temp_TextID"> No Data </h5>
			
		</div>

		<div class="sensor_Box">

			<h4> AmbientTemp [°C]</h4>
			<h5 id ="AmbTemp_TextID"> No Data</h5>
			
		</div>

		<div class="sensor_Box">

			<h4> Battery [Volts]</h4>
			<h5 id= "Battery_TextID"> No Data</h5>
		</div>			
	</div>

	
	
</body>


</html>